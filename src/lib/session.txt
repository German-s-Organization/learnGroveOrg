import type { AuthSession } from '@supabase/supabase-js'
import { Component, createEffect, createSignal } from 'solid-js'
import { supabase } from './supabaseClient'
import { useStore} from '@nanostores/solid'
import { currentSession } from './userSessionStore'

export const UserSession: Component = () => {
    const userSession = useStore(currentSession)

    createEffect(() => {
        supabase.auth.getSession().then(({ data: { session } }) => {
            currentSession.set(session)
        })

        supabase.auth.onAuthStateChange((_event, session) => {
            currentSession.set(session)
        })
    })
    
    return (
        null
    )
}

export default UserSession